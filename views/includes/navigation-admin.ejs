<!-- Mobile Menu Button -->
<button id="mobileMenuBtn" class="lg:hidden fixed top-4 left-4 z-50 p-2 bg-white rounded-lg shadow-lg border border-gray-200">
  <i class="ri-menu-line text-xl text-gray-700"></i>
</button>

<!-- Mobile Overlay -->
<div id="mobileOverlay" class="lg:hidden fixed inset-0 bg-black bg-opacity-50 z-20 opacity-0 pointer-events-none transition-opacity duration-300"></div>

<!-- Modern Admin Sidebar -->
<nav id="adminSidebar" class="fixed top-0 left-0 h-screen w-64 bg-white border-r border-gray-200 shadow-xl z-30 overflow-y-auto transform -translate-x-full lg:translate-x-0 transition-transform duration-300">
  <!-- Header Section -->
  <div class="flex items-center gap-3 px-6 py-6 border-b border-gray-100">
    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center">
      <i class="ri-store-2-line text-xl text-white"></i>
    </div>
    <div>
      <h1 class="text-lg font-bold text-gray-800">PetShop Admin</h1>
      <p class="text-xs text-gray-500">Quản trị hệ thống</p>
    </div>
  </div>
  
  <!-- Navigation Menu -->
  <div class="flex-1 flex flex-col gap-2 px-4 py-6 overflow-y-auto">
    <!-- Dashboard -->
    <a href="/admin/dashboard" 
       class="group flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-600 <%= path === '/admin/dashboard' ? 'bg-blue-50 text-blue-600 font-semibold shadow-sm' : '' %>">
      <div class="w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center group-hover:bg-blue-200 transition-colors duration-200">
        <i class="ri-dashboard-line text-lg <%= path === '/admin/dashboard' ? 'text-blue-600' : 'text-blue-500' %>"></i>
      </div>
      <span>Dashboard</span>
    </a>
    
    <!-- Products -->
    <a href="/admin/products" 
       class="group flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-600 <%= path === '/admin/products' ? 'bg-blue-50 text-blue-600 font-semibold shadow-sm' : '' %>">
      <div class="w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center group-hover:bg-blue-200 transition-colors duration-200">
        <i class="ri-list-check text-lg <%= path === '/admin/products' ? 'text-blue-600' : 'text-blue-500' %>"></i>
      </div>
      <span>Sản phẩm</span>
    </a>
    
    <!-- Orders -->
    <a href="/admin/orders" 
       class="group flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 font-medium text-gray-700 hover:bg-green-50 hover:text-green-600 <%= path === '/admin/orders' ? 'bg-green-50 text-green-600 font-semibold shadow-sm' : '' %>">
      <div class="w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center group-hover:bg-green-200 transition-colors duration-200">
        <i class="ri-shopping-bag-line text-lg <%= path === '/admin/orders' ? 'text-green-600' : 'text-green-500' %>"></i>
      </div>
      <span>Đơn hàng</span>
    </a>
    
    <!-- Services -->
    <a href="/admin/services" 
       class="group flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 font-medium text-gray-700 hover:bg-orange-50 hover:text-orange-600 <%= path === '/admin/services' ? 'bg-orange-50 text-orange-600 font-semibold shadow-sm' : '' %>">
      <div class="w-8 h-8 rounded-lg bg-orange-100 flex items-center justify-center group-hover:bg-orange-200 transition-colors duration-200">
        <i class="ri-service-line text-lg <%= path === '/admin/services' ? 'text-orange-600' : 'text-orange-500' %>"></i>
      </div>
      <span>Dịch vụ</span>
    </a>
    
    <!-- News -->
    <a href="/admin/news" 
       class="group flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 font-medium text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 <%= path === '/admin/news' ? 'bg-indigo-50 text-indigo-600 font-semibold shadow-sm' : '' %>">
      <div class="w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center group-hover:bg-indigo-200 transition-colors duration-200">
        <i class="ri-newspaper-line text-lg <%= path === '/admin/news' ? 'text-indigo-600' : 'text-indigo-500' %>"></i>
      </div>
      <span>Tin tức</span>
    </a>
    
    <!-- Users -->
    <a href="/admin/accounts" 
       class="group flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 font-medium text-gray-700 hover:bg-yellow-50 hover:text-yellow-600 <%= path === '/admin/accounts' ? 'bg-yellow-50 text-yellow-600 font-semibold shadow-sm' : '' %>">
      <div class="w-8 h-8 rounded-lg bg-yellow-100 flex items-center justify-center group-hover:bg-yellow-200 transition-colors duration-200">
        <i class="ri-user-settings-line text-lg <%= path === '/admin/accounts' ? 'text-yellow-600' : 'text-yellow-500' %>"></i>
      </div>
      <span>Tài khoản</span>
    </a>
    
    <!-- Reviews -->
    <a href="/admin/reviews" 
       class="group flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 font-medium text-gray-700 hover:bg-purple-50 hover:text-purple-600 <%= path === '/admin/reviews' ? 'bg-purple-50 text-purple-600 font-semibold shadow-sm' : '' %>">
      <div class="w-8 h-8 rounded-lg bg-purple-100 flex items-center justify-center group-hover:bg-purple-200 transition-colors duration-200">
        <i class="ri-star-line text-lg <%= path === '/admin/reviews' ? 'text-purple-600' : 'text-purple-500' %>"></i>
      </div>
      <span>Đánh giá</span>
    </a>
    
    <!-- Coupons -->
    <a href="/admin/coupons" 
       class="group flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 font-medium text-gray-700 hover:bg-pink-50 hover:text-pink-600 <%= path === '/admin/coupons' ? 'bg-pink-50 text-pink-600 font-semibold shadow-sm' : '' %>">
      <div class="w-8 h-8 rounded-lg bg-pink-100 flex items-center justify-center group-hover:bg-pink-200 transition-colors duration-200">
        <i class="ri-coupon-line text-lg <%= path === '/admin/coupons' ? 'text-pink-600' : 'text-pink-500' %>"></i>
      </div>
      <span>Mã giảm giá</span>
    </a>
    
    <!-- Contacts & Newsletter -->
    <a href="/admin/contacts" 
       class="group flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 font-medium text-gray-700 hover:bg-teal-50 hover:text-teal-600 <%= path === '/admin/contacts' || path === '/admin/newsletter' ? 'bg-teal-50 text-teal-600 font-semibold shadow-sm' : '' %>">
      <div class="w-8 h-8 rounded-lg bg-teal-100 flex items-center justify-center group-hover:bg-teal-200 transition-colors duration-200">
        <i class="ri-contacts-line text-lg <%= path === '/admin/contacts' || path === '/admin/newsletter' ? 'text-teal-600' : 'text-teal-500' %>"></i>
      </div>
      <span>Liên hệ & Newsletter</span>
    </a>
  </div>
  
  <!-- User Profile & Logout Section -->
  <div class="px-4 py-6 border-t border-gray-100">
    <!-- User Info -->
    <div class="flex items-center gap-3 mb-4 px-2">
      <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center">
        <i class="ri-user-3-line text-lg text-white"></i>
      </div>
      <div>
        <span class="text-sm font-semibold text-gray-800">Admin</span>
        <p class="text-xs text-gray-500">Quản trị viên</p>
      </div>
    </div>
    
    <!-- Logout Button -->
    <form action="/auth/logout" method="POST" class="block">
      <button type="submit"
        id="logoutBtn"
        class="w-full flex items-center justify-center gap-3 h-12 rounded-xl bg-gradient-to-r from-red-500 to-red-600 text-white font-semibold text-sm shadow-lg hover:from-red-600 hover:to-red-700 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-2 transform hover:scale-105 relative overflow-hidden group">
        <!-- Button Content -->
        <span class="flex items-center gap-2 relative z-10">
          <i id="logoutIcon" class="ri-logout-box-r-line text-lg transition-transform duration-200 group-hover:scale-110"></i>
          <span id="logoutText" class="transition-transform duration-200 group-hover:translate-x-1">Đăng xuất</span>
        </span>
        
        <!-- Hover Effect -->
        <div class="absolute inset-0 bg-white bg-opacity-10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
        
        <!-- Loading State -->
        <div id="logoutLoading" class="absolute inset-0 bg-red-600 rounded-xl opacity-0 pointer-events-none transition-opacity duration-300 flex items-center justify-center">
          <i class="ri-loader-4-line text-lg animate-spin text-white"></i>
        </div>
      </button>
    </form>
    
    <!-- Version Info -->
    <div class="mt-4 text-center">
      <p class="text-xs text-gray-400">v1.0.0</p>
    </div>
  </div>
</nav>

<script>
  // Mobile menu functionality
  const mobileMenuBtn = document.getElementById('mobileMenuBtn');
  const adminSidebar = document.getElementById('adminSidebar');
  const mobileOverlay = document.getElementById('mobileOverlay');
  
  mobileMenuBtn.addEventListener('click', function() {
    const isOpen = !adminSidebar.classList.contains('-translate-x-full');
    
    if (isOpen) {
      // Close menu
      adminSidebar.classList.add('-translate-x-full');
      mobileOverlay.classList.add('opacity-0', 'pointer-events-none');
    } else {
      // Open menu
      adminSidebar.classList.remove('-translate-x-full');
      mobileOverlay.classList.remove('opacity-0', 'pointer-events-none');
    }
  });
  
  // Close mobile menu when clicking overlay
  mobileOverlay.addEventListener('click', function() {
    adminSidebar.classList.add('-translate-x-full');
    mobileOverlay.classList.add('opacity-0', 'pointer-events-none');
  });
  
  // Close mobile menu when clicking outside
  document.addEventListener('click', function(e) {
    if (!adminSidebar.contains(e.target) && !mobileMenuBtn.contains(e.target)) {
      adminSidebar.classList.add('-translate-x-full');
      mobileOverlay.classList.add('opacity-0', 'pointer-events-none');
    }
  });
  
  // Enhanced logout functionality
  const logoutBtn = document.getElementById('logoutBtn');
  const logoutText = document.getElementById('logoutText');
  const logoutIcon = document.getElementById('logoutIcon');
  const logoutLoading = document.getElementById('logoutLoading');
  
  logoutBtn.addEventListener('click', function(e) {
    e.preventDefault();
    
    if (confirm('Bạn có chắc muốn đăng xuất khỏi hệ thống quản trị?')) {
      // Show loading state
      logoutBtn.classList.add('cursor-not-allowed');
      logoutBtn.disabled = true;
      logoutText.textContent = 'Đang đăng xuất...';
      logoutIcon.style.display = 'none';
      logoutLoading.style.opacity = '1';
      
      // Simulate logout process
      setTimeout(() => {
        logoutBtn.form.submit();
      }, 1500);
    }
  });
  
  // Add hover effects for menu items
  document.addEventListener('DOMContentLoaded', function() {
    const menuItems = document.querySelectorAll('nav a');
    
    menuItems.forEach(item => {
      item.addEventListener('mouseenter', function() {
        this.style.transform = 'translateX(4px)';
      });
      
      item.addEventListener('mouseleave', function() {
        this.style.transform = 'translateX(0)';
      });
    });
  });
  
  // Add active state indicators
  document.addEventListener('DOMContentLoaded', function() {
    const currentPath = window.location.pathname;
    const menuItems = document.querySelectorAll('nav a');
    
    menuItems.forEach(item => {
      if (item.getAttribute('href') === currentPath) {
        item.classList.add('ring-2', 'ring-offset-2', 'ring-blue-500');
      }
    });
  });
</script>